doctype
<!-- @if !PRODUCTION --><html lang='en' ng-app='walletApp' ng-init="autoReload=#{ process.env.AUTO_RELOAD || false }; rootURL='#{ process.env.ROOT_URL }/'; rootPath='#{ process.env.ROOT_PATH }'; webSocketURL='#{ process.env.WEBSOCKET_URL }'; apiDomain='#{ process.env.API_DOMAIN }/';" ng-csp ng-class="{'not-fixed': outOfApp}"><!-- @endif -->
<!-- @if PRODUCTION !><html lang='en' ng-app='walletApp' ng-csp ng-class="{'not-fixed': outOfApp}"><!-- @endif -->
head
  base(href='/wallet-beta/')
  meta(charset='utf-8')
  meta(name="viewport",content="width=device-width, initial-scale=1.0, maximum-scale=1") 
  meta(name="theme-color" content="#187fc0")
  meta(name="apple-itunes-app" content="app-id=493253309")
  link(rel="apple-touch-icon" sizes="180x180" href="assets/img/favicon/apple-icon-180x180.png")
  link(rel="apple-touch-icon" sizes="152x152" href="assets/img/favicon/apple-icon-152x152.png")
  link(rel="apple-touch-icon" sizes="144x144" href="assets/img/favicon/apple-icon-144x144.png")
  link(rel="apple-touch-icon" sizes="120x120" href="assets/img/favicon/apple-icon-120x120.png")
  link(rel="apple-touch-icon" sizes="114x114" href="assets/img/favicon/apple-icon-114x114.png")
  link(rel="apple-touch-icon" sizes="76x76" href="assets/img/favicon/apple-icon-76x76.png")
  link(rel="apple-touch-icon" sizes="72x72" href="assets/img/favicon/apple-icon-72x72.png")
  link(rel="apple-touch-icon" sizes="60x60" href="assets/img/favicon/apple-icon-60x60.png")
  link(rel="apple-touch-icon" sizes="57x57" href="assets/img/favicon/apple-icon-57x57.png")
  link(rel="icon" type="image/png" sizes="192x192"  href="assets/img/favicon/android-icon-192x192.png")
  link(rel="icon" type="image/png" sizes="32x32" href="assets/img/favicon/favicon-32x32.png")
  link(rel="icon" type="image/png" sizes="96x96" href="assets/img/favicon/favicon-96x96.png")
  link(rel="icon" type="image/png" sizes="16x16" href="assets/img/favicon/favicon-16x16.png")
  meta(name="msapplication-TileColor" content="#ffffff")
  meta(name="msapplication-TileImage" content="assets/img/favicon/ms-icon-144x144.png")
  title Blockchain Wallet
  <!-- @if !PRODUCTION -->
  link(rel="stylesheet" href="assets/bower_components/angular-ui-select/dist/select.css")
  link(rel='stylesheet' href='assets/bower_components/bc-css-flags/dist/css/bc-css-flags.css')
  link(rel='stylesheet' href='assets/bower_components/bc-phone-number/dist/css/bc-phone-number.css')  
  link(rel='stylesheet' href='assets/build/css/ladda.css')
  link(rel='stylesheet' href='assets/build/css/blockchain.css')
  link(rel='stylesheet' href='assets/build/css/fonts.css')
  link(rel='stylesheet' href='assets/build/css/angular-csp.css')
  link(rel='stylesheet' href='assets/build/css/ui-bootstrap-csp.css')  
  <!-- @endif -->
  
  <!-- @if PRODUCTION !>
  link(rel='stylesheet', href='assets/css/application.css')
  <!-- @endif -->

body(ng-controller="AppCtrl" ui-view="body" ng-mousemove="resetInactivityTime()" ng-keypress="resetInactivityTime()")
  
  //- This does not depend on Angular and will show as soon as the images are done loading.
  .blocket-loading
    div
      img.full(src="assets/img/blocket-full.png")
      img(src="assets/img/blocket-no-boosters.png")

  noscript
    img(src="assets/img/logo-bw.png")
    h3 Please enable JavaScript to use the Blockchain Wallet

  //- Load javascript in the body async.
  <!-- @if !PRODUCTION -->
  script(src='assets/bower_components/angular/angular.js')
  script(src='assets/bower_components/angular-sanitize/angular-sanitize.js')
  script(src='assets/bower_components/angular-cookies/angular-cookies.js')
  script(src='assets/bower_components/angular-bootstrap/ui-bootstrap-tpls.js')
  script(src='assets/bower_components/angular-animate/angular-animate.js')
  script(src='assets/bower_components/angular-ui-router/release/angular-ui-router.js')
  script(src='assets/bower_components/angular-ui-select/dist/select.js')
  script(src='assets/bower_components/angular-audio/app/angular.audio.js')
  script(src='assets/bower_components/qrcode/lib/qrcode.js')
  script(src='assets/bower_components/angular-qr/src/angular-qr.js')
  script(src='assets/bower_components/angular-translate/angular-translate.js')
  script(src='assets/bower_components/angular-translate-loader-static-files/angular-translate-loader-static-files.js')
 
  script(src='assets/bower_components/angular-inview/angular-inview.js')
  script(src='assets/bower_components/angular-password-entropy/password-entropy.js')  
  
  script(src='assets/bower_components/digits-trie/dist/digits-trie.js')
  script(src='assets/bower_components/google-libphonenumber/dist/browser/libphonenumber.js')
  script(src='assets/bower_components/bc-countries/dist/bc-countries.js')
  script(src='assets/bower_components/bc-phone-number/dist/js/bc-phone-number.js')  
  
  script(src='assets/bower_components/browserdetection/src/browser-detection.js')
  
  //- Blockchain MyWallet javascript (must be called before 'app')
  script(src='assets/bower_components/blockchain-wallet/dist/my-wallet.js')
  script(src='assets/build/js/core/core.module.js')
  script(src='assets/build/js/core/api.service.js')
  script(src='assets/build/js/core/rng.service.js')
  script(src='assets/build/js/core/settings.service.js')
  script(src='assets/build/js/core/store.service.js')
  script(src='assets/build/js/core/myWallet.service.js')
  script(src='assets/build/js/core/payment.service.js')
  script(src='assets/build/js/core/walletTokenEndpoints.service.js')
  script(src='assets/build/js/core/walletNetwork.service.js')
  script(src='assets/build/js/core/helpers.service.js')
  
  script(src='assets/build/js/polyfill.js')
  script(src='assets/build/js/app.js')
  script(src='assets/build/js/translations.js')
  
  script(src='assets/build/js/controllers/accountForm.controller.js')
  script(src='assets/build/js/controllers/revealXpub.controller.js')
  script(src='assets/build/js/controllers/app.controller.js')
  script(src='assets/build/js/controllers/claim.controller.js')
  script(src='assets/build/js/controllers/claimModal.controller.js')
  script(src='assets/build/js/controllers/confirmRecoveryPhrase.controller.js')
  script(src='assets/build/js/controllers/home.controller.js')
  script(src='assets/build/js/controllers/firstTime.controller.js')
  script(src='assets/build/js/controllers/login.controller.js')
  script(src='assets/build/js/controllers/navigation.controller.js')
  script(src='assets/build/js/controllers/openLink.controller.js')
  script(src='assets/build/js/controllers/request.controller.js')
  script(src='assets/build/js/controllers/secondPassword.controller.js')
  script(src='assets/build/js/controllers/securityCenter.controller.js')
  script(src='assets/build/js/controllers/send.controller.js')
  script(src='assets/build/js/controllers/signup.controller.js')
  script(src='assets/build/js/controllers/top.controller.js')
  script(src='assets/build/js/controllers/transaction.controller.js')
  script(src='assets/build/js/controllers/transactions.controller.js')
  script(src='assets/build/js/controllers/upgrade.controller.js')
  script(src='assets/build/js/controllers/modalNotification.controller.js')
  script(src='assets/build/js/controllers/recoverFunds.controller.js')
  script(src='assets/build/js/controllers/lostGuid.controller.js')
  script(src='assets/build/js/controllers/ResetTwoFactor.controller.js')
  script(src='assets/build/js/controllers/feedback.controller.js')
  script(src='assets/build/js/controllers/walletNavigation.controller.js')
  script(src='assets/build/js/controllers/verifyEmail.controller.js')
  script(src='assets/build/js/controllers/unsubscribe.controller.js')
  script(src='assets/build/js/controllers/authorizeApprove.controller.js')
  script(src='assets/build/js/controllers/resetTwoFactorToken.controller.js')
  script(src='assets/build/js/controllers/dynamicFee.controller.js')
  script(src='assets/build/js/controllers/settings/settings.controller.js')
  script(src='assets/build/js/controllers/settings/info.controller.js')
  script(src='assets/build/js/controllers/settings/preferences.controller.js')
  script(src='assets/build/js/controllers/settings/security.controller.js')
  script(src='assets/build/js/controllers/settings/accounts.controller.js')
  script(src='assets/build/js/controllers/settings/addresses.controller.js')
  script(src='assets/build/js/controllers/settings/importedAddresses.controller.js')
  script(src='assets/build/js/controllers/settings/addressBook.controller.js')
  script(src='assets/build/js/controllers/settings/addressImport.controller.js')
  script(src='assets/build/js/controllers/settings/changePassword.controller.js')
  script(src='assets/build/js/controllers/settings/setSecondPassword.controller.js')
  script(src='assets/build/js/controllers/settings/showPrivateKey.controller.js')
  script(src='assets/build/js/controllers/settings/twoFactor.controller.js')
  script(src='assets/build/js/controllers/settings/signMessage.controller.js')
  script(src='assets/build/js/controllers/settings/verifyMessage.controller.js')
  script(src='assets/build/js/controllers/welcome.controller.js')
  
  script(src='assets/build/js/filters.js')
  script(src='assets/build/js/routes.js')
  
  script(src='assets/build/js/directives/activity-feed.directive.js')
  script(src='assets/build/js/directives/address-book-entry.directive.js')
  script(src='assets/build/js/directives/adverts.directive.js')
  script(src='assets/build/js/directives/alerts.directive.js')
  script(src='assets/build/js/directives/amount.directive.js')
  script(src='assets/build/js/directives/setting-toggle.directive.js')
  script(src='assets/build/js/directives/bc-async-input.directive.js')
  script(src='assets/build/js/directives/completed-level.directive.js')
  script(src='assets/build/js/directives/contextual-message.directive.js')
  script(src='assets/build/js/directives/configure-mobile-number.directive.js')
  script(src='assets/build/js/directives/verify-mobile-number.directive.js')
  script(src='assets/build/js/directives/configure-second-password.directive.js')
  script(src='assets/build/js/directives/confirm-recovery-phrase.directive.js')
  script(src='assets/build/js/directives/did-you-know.directive.js')
  script(src='assets/build/js/directives/fiat-or-btc.directive.js')
  script(src='assets/build/js/directives/fiat.directive.js')
  script(src='assets/build/js/directives/hd-address.directive.js')
  script(src='assets/build/js/directives/imported-address.directive.js')
  script(src='assets/build/js/directives/watch-only-address.directive.js')
  script(src='assets/build/js/directives/helper-button.directive.js')
  script(src='assets/build/js/directives/ip-whitelist-restrict.directive.js')
  script(src='assets/build/js/directives/on-enter.directive.js')
  script(src='assets/build/js/directives/resend-email-confirmation.directive.js')
  script(src='assets/build/js/directives/scroll-to-top.directive.js')
  script(src='assets/build/js/directives/single-click-select.directive.js')
  script(src='assets/build/js/directives/tor.directive.js')
  script(src='assets/build/js/directives/transaction-description.directive.js')
  script(src='assets/build/js/directives/transaction-note.directive.js')
  script(src='assets/build/js/directives/transaction-status.directive.js')
  script(src='assets/build/js/directives/ui-ladda.directive.js')
  script(src='assets/build/js/directives/virtual-keyboard.directive.js')
  script(src='assets/build/js/directives/focus-when.directive.js')
  script(src='assets/build/js/directives/is-valid.directive.js')
  script(src='assets/build/js/directives/is-not-equal.directive.js')
  script(src='assets/build/js/directives/transform-currency.directive.js')
  script(src='assets/build/js/directives/label-origin.directive.js')
  script(src='assets/build/js/directives/destinationInput.directive.js')
  script(src='assets/build/js/directives/scroll-in-view.directive.js')
  script(src='assets/build/js/directives/public-header.directive.js')
  script(src='assets/build/js/directives/async-select.directive.js')
  script(src='assets/build/js/directives/qr-scan.directive.js')
  script(src='assets/build/js/directives/blocket-loading.directive.js')
  script(src='assets/build/js/directives/video-container.directive.js')
  
  script(src='assets/build/js/services/wallet.service.js')
  script(src='assets/build/js/services/securityCenter.service.js')
  script(src='assets/build/js/services/adverts.service.js')
  script(src='assets/build/js/services/bcTranslationLoader.service.js')
  script(src='assets/build/js/services/didYouKnow.service.js')
  script(src='assets/build/js/services/activity.service.js')
  script(src='assets/build/js/services/alerts.service.js')
  script(src='assets/build/js/services/languages.service.js')
  script(src='assets/build/js/services/currency.service.js')
  script(src='assets/build/js/services/format.service.js')
  script(src='assets/build/js/services/fees.service.js')
  
  script(src='assets/build/js/templates.js')
      
  script(src='assets/bower_components/webcam-directive/app/scripts/webcam.js')
  script(src='assets/bower_components/bc-qr-reader/dist/bc-qr-reader.js')
  <!-- @endif -->
  
  <!-- @if PRODUCTION !>
  script(src='assets/js/application.min.js')  
  <!-- @endif -->

  //- Whitelist by copying script from browser and putting it in a file 
  //- (including the last new line) and then run:
  //- cat script | openssl dgst -sha256 -binary | openssl enc -base64
  script.
    if(browserDetection().browser === "ie" && browserDetection().version < 11) {
      if ( confirm("Your browser is out of date! It looks like you're using an old version of Internet Explorer. For the best Blockchain experience, please update your browser or hit cancel to return to our homepage.") ) {
        window.location = "http://browsehappy.com/";
      }
      else {
        window.location = "https://blockchain.info/";
      }
    }
